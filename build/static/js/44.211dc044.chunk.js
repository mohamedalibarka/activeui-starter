(self.webpackChunk_activeviam_activeui=self.webpackChunk_activeviam_activeui||[]).push([[44],{62099:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>k});var n=l(99046),a=l(21127),o=l.n(a),s=l(88517),r=l(58527),c=l.n(r),i=l(6335),u=l.n(i),d=l(77124),p=l.n(d),m=l(8492),g=l(76156),h=l.n(g),b=l(13224),y=l(83541);const v=e=>e.map((e=>(e.r.push(e.r[0]),e.theta.push(e.theta[0]),e.cellsIndices.push(e.cellsIndices[0]),e)));function I({cube:e,data:t,metaData:l,widgetState:{mapping:n}}){if(!e||!t||!l)return[];const a={},o=l.orderedAxis,r=n.values.length>0,c=o.captions.length>0,i={},u={mapping:{},numberOfUsedAutomaticColors:0},d=e=>{const t=e.splitBy,r=(0,s.Lj)([...t,...e.horizontalSubplots,...e.verticalSubplots]);if(!a[r]){const e=((e,t)=>{const a=n.values.length,r=(0,s.Ym)(t,a);return{_key:e,hoverinfo:"none",legendgroup:r,line:{color:(0,s.he)({accumulator:u,colorway:l.colorway,traceName:r})},name:r,cellsIndices:h()(new Array(o.captions.length),null),axisIndices:h()(new Array(o.captions.length),null),type:"scatterpolar",fill:"toself",theta:c?o.captions:[""],r:c?h()(new Array(o.captions.length),null):[null],text:[],opacity:1}})(r,t);a[r]=e,i[r]=0}return a[r]};(0,b.IG)(t,l.hierarchyIndicesInCellSet,(({cell:e,cellIndex:t,columnIndex:a,tuple:u,rowIndex:p})=>{if(u){const m=(0,s._F)(u,{levelIndices:l.levelIndicesPerField,mapping:n,attributesRedirection:l.attributesRedirection}),g=d(m),h=m.axis,b=(0,s.bC)(h),y=c?o.members[b]:0;c&&(g.axisIndices[y]=i[g._key],i[g._key]++),null!==e&&null!==t&&(r&&(g.r[y]=e.value),g.cellsIndices[y]=[{columnIndex:a,rowIndex:p,cellIndex:t}])}}));const p=Object.values(a);p.forEach((e=>{var t;null===(t=e.axisIndices)||void 0===t||t.push(0)}));const m=(0,s.$)({traces:v(p),subplotsMetaData:l.subplots});return((e,t)=>{const l=t.vertical.keys.length;e.forEach((e=>{const n=t.horizontal.keys.findIndex((t=>e._key.includes(t))),a=t.vertical.keys.findIndex((t=>e._key.includes(t)))+1;let o=n+1;l>0&&(o=(n>-1?n:0)*l+a),e.subplot=`polar${o}`}))})(m,l.subplots),(0,s.Yw)(m),m}const x=(e,t)=>{if(!e)return{};const l=e.subplots.horizontal.keys.length>0||e.subplots.vertical.keys.length>0;return(0,y.IM)({...l&&{grid:{ygap:.5,xgap:.5}},margin:{r:60},polar:{bgcolor:t.backgroundColor,radialaxis:{color:(0,m.Ut)(t.textColor,.25)}}},((e,t)=>{const l=e.vertical.keys.length,n=e.horizontal.keys.length,a=n>0,o=l>0,s=a&&o?n*l:n+l,r={};for(let c=1;c<=s;c++){const e=a?Math.ceil((c-n)/n):c-1,l=a?(c-1)%n:c;r[`polar${c}`]={bgcolor:t.backgroundColor,radialaxis:{color:(0,m.Ut)(t.textColor,.25)},domain:{row:o?e:0,column:a?l:0}}}return r})(e.subplots,t),(0,s.S5)(e.subplots))};u().register(p());const k=(0,s.dC)((0,s.i)((0,s.H9)((0,a.memo)((e=>{const{cube:t,data:l,metaData:r,widgetState:i,onLoaded:u}=e,d=(0,a.useMemo)((()=>(0,n.TS)(null==i?void 0:i.mapping)),[null==i?void 0:i.mapping]);(0,s.ge)({isEmpty:d,onLoaded:u});const p=(0,a.useMemo)((()=>I({cube:t,data:l,metaData:r,widgetState:i})),[t,l,r,i]),g=(0,m.Fg)(),h=(0,a.useMemo)((()=>x(r,g)),[r,g]);return t&&l&&r&&!d?o().createElement(s.XN,c()({},e,{traces:p,layout:h,cube:t,data:l,metaData:r})):o().createElement(s.MQ,null)})))))}}]);